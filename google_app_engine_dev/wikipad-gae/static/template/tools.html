<?py include('header.html') ?>
<script src="/js/bootstrap-alerts.js"></script>
<script src="/js/bootstrap-buttons.js"></script>

<div class="row">
  <div class="span14">
    <div class="info"></div>
    <form action="#{{BLOG_HOME_RELATIVE_PATH}}contact" method="POST"
      class="ajax-form">
      <fieldset>
        <legend>LaTeX Formula Render</legend>
        <div class="clearfix">
          <label for="xlInput">Source Code</label>
          <div class="input">
            <textarea class="span9" id="code" name="code" rows="8"
              cols="120"></textarea>
          </div>
        </div>
        <div class="clearfix" id="result">
          <div class="input">
            <img src="" id="img">
          </div>
        </div>
        <div class="actions">
        <button type="submit" id="submit-btn" class="btn large primary"
          data-loading-text="sending">Render</button>
        <button type="reset" class="btn large cancel-btn">Reset</button>
        </div>
      </fieldset>
    </form>
  </div>
</div>
<script>
  $(function(){
    var google_chart_api = "https://chart.googleapis.com/chart?cht=tx&chl=";
    $('#result').hide();
    $('.ajax-form').submit(
      function(){
        return false;
    });

    function render(){
        var source = $('#code').val();
        var src = google_chart_api + encodeURI(source);
        var result = $('#result');
        var img =  $('#img');
        img.attr('src', src);
        result.show();
    }

    $('#code').change(function(){
      render();
    });

    $('button[type=submit]').click(
      function(){
        render();
    });
  });
</script>

<?py include('footer.html') ?>
